(function(e){function t(t){for(var a,l,i=t[0],u=t[1],s=t[2],b=0,r=[];b<i.length;b++)l=i[b],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&r.push(n[l][0]),n[l]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(r.length)r.shift()();return o.push.apply(o,s||[]),c()}function c(){for(var e,t=0;t<o.length;t++){for(var c=o[t],a=!0,i=1;i<c.length;i++){var u=c[i];0!==n[u]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=c[0]))}return e}var a={},n={app:0},o=[];function l(t){if(a[t])return a[t].exports;var c=a[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=e,l.c=a,l.d=function(e,t,c){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(c,a,function(t){return e[t]}.bind(null,a));return c},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/aviaticket/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=u;o.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"0f47":function(e,t,c){},"23c8":function(e,t,c){"use strict";c("5c5c")},"286a":function(e,t,c){"use strict";c("f8a5")},"48c7":function(e,t,c){},"514a":function(e,t,c){},"5be9":function(e,t,c){},"5c5c":function(e,t,c){},"5ddb":function(e,t,c){"use strict";c("48c7")},"64a8":function(e,t,c){"use strict";c("b0ec")},"66fb":function(e,t,c){},"6c4b":function(e,t,c){"use strict";c("5be9")},"6d06":function(e,t,c){"use strict";c("0f47")},7372:function(e,t,c){},"77ab":function(e,t,c){"use strict";c("514a")},"80b7":function(e,t,c){},"890d":function(e,t,c){"use strict";c("7372")},"8d13":function(e,t,c){},"944f":function(e,t,c){"use strict";c("f060")},"974b":function(e,t,c){"use strict";c("a10e")},"9b19":function(e,t,c){e.exports=c.p+"img/logo.ee84f7c2.svg"},"9e0b":function(e,t,c){},a10e:function(e,t,c){},a202:function(e,t,c){"use strict";c("66fb")},b0ec:function(e,t,c){},b392:function(e,t,c){},c451:function(e,t,c){"use strict";c("8d13")},c6c0:function(e,t,c){"use strict";c("b392")},cbe1:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var a=c("7a23");function n(e,t){const c=Object(a["D"])("router-view");return Object(a["u"])(),Object(a["d"])(c)}var o=c("6b0d"),l=c.n(o);const i={},u=l()(i,[["render",n]]);var s=u,d=c("6605"),b=c("9b19"),r=c.n(b);const j=e=>(Object(a["x"])("data-v-0a03cfe0"),e=e(),Object(a["v"])(),e),O={class:"base-layout"},p=j(()=>Object(a["g"])("div",{class:"center mt05 mb1"},[Object(a["g"])("img",{alt:"Vue logo",src:r.a})],-1)),v={class:"container"};function f(e,t){return Object(a["u"])(),Object(a["f"])("div",O,[p,Object(a["g"])("div",v,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])])}c("f066");const m={},_=l()(m,[["render",f],["__scopeId","data-v-0a03cfe0"]]);var h=_;const g={class:"app-sheet p2 rounded"};function k(e,t){return Object(a["u"])(),Object(a["f"])("div",g,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])}c("d09f");const I={},y=l()(I,[["render",k],["__scopeId","data-v-20104a10"]]);var T=y,S=c("1b5e"),x=c("2cb2");const A={iddle:{on:{LOAD_DATA:"loading"}},loading:{on:{DATA_LOADED:"ready",FAIL:"failure"}},ready:{on:{LOAD_DATA:"loading"}},failure:{on:{LOAD_DATA:"loading"}}},V=Object(S["a"])({id:"companyMachine",initial:"iddle",states:A}),N=Object(x["a"])(V);var w=c("bc3a"),D=c.n(w);const C=D.a.create({baseURL:"https://api.npoint.io",headers:{"Content-Type":"application/json"}});var E=C;const M=()=>E.get("/a1b1c28b32d9785bb26c").then(e=>e.data);var L={fetchCompanies:M};const $=Object(a["A"])([]),B=Object(a["A"])(V.initialState.value);N.onTransition(e=>{B.value=e.value}).start();const H=()=>{const e=e=>{$.value=e},t=async()=>{if("loading"!==B.value){N.send("LOAD_DATA");try{const t=await L.fetchCompanies(),c=t.map(e=>({...e,logo:"/aviaticket/img/companies/"+e.logo}));e(c),N.send(c.length>0?"DATA_LOADED":"NOTHING_LOADED")}catch{N.send("FAILURE")}}},c=e=>{var t;const c=null===(t=$.value.find(t=>t.id===e))||void 0===t?void 0:t.logo;return c||""};return"iddle"===B.value&&t(),{companies:Object(a["z"])($),loadCompanies:t,updateCompanies:e,getCompanyLogo:c,state:Object(a["z"])(B)}};var P=H;const z={mounted(e){const t=e.innerHTML;e.innerHTML=t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}};var G=z;const F=6e4,U=60,R=F*U,K=e=>{const t=Math.floor(e/R),c=Math.floor(e/F)%U;return`${t}ч ${c}м`},J=e=>`${e.getDate()}.${e.getMonth()+1}  ${e.getHours()}:${e.getMinutes()}`,W=e=>(Object(a["x"])("data-v-edb4f382"),e=e(),Object(a["v"])(),e),q={class:"ticket-card__top flex items-center justify-between mb2"},Q={class:"ticket-card__price h3 line-height-1"},X={class:"ticket-card__company"},Y={class:"block"},Z=["srcset"],ee=["src"],te={class:"ticket-card__bottom flex items-center justify-between"},ce={class:"ticket-card__route col-4"},ae={class:"subheading text-muted"},ne={class:"ticket-card__duration col-4"},oe=W(()=>Object(a["g"])("div",{class:"subheading text-muted"},"В пути",-1)),le={class:"ticket-card__stops col-4"},ie={class:"subheading text-muted"},ue={key:1,class:"subheading text-muted"};var se=Object(a["j"])({__name:"TicketCard",props:{ticketData:null},setup(e){const t=e,{ticketData:c}=Object(a["H"])(t),{getCompanyLogo:n}=P(),o=Object(a["b"])(()=>n(c.value.companyId)),l=Object(a["b"])(()=>K(c.value.info.duration)),i=Object(a["b"])(()=>`${J(c.value.info.dateStart)} – ${J(c.value.info.dateEnd)}`);return(e,t)=>(Object(a["u"])(),Object(a["d"])(T,{class:"ticket-card shadow-3"},{default:Object(a["N"])(()=>[Object(a["g"])("div",q,[Object(a["O"])((Object(a["u"])(),Object(a["f"])("div",Q,[Object(a["h"])(Object(a["G"])(Object(a["I"])(c).price)+" Р",1)])),[[Object(a["I"])(G)]]),Object(a["g"])("div",X,[Object(a["g"])("picture",Y,[Object(a["g"])("source",{srcset:Object(a["I"])(o)},null,8,Z),Object(a["g"])("img",{src:Object(a["I"])(o)},null,8,ee)])])]),Object(a["g"])("div",te,[Object(a["g"])("div",ce,[Object(a["g"])("div",ae,Object(a["G"])(Object(a["I"])(c).info.origin)+" – "+Object(a["G"])(Object(a["I"])(c).info.destination),1),Object(a["g"])("div",null,Object(a["G"])(Object(a["I"])(i)),1)]),Object(a["g"])("div",ne,[oe,Object(a["g"])("div",null,Object(a["G"])(Object(a["I"])(l)),1)]),Object(a["g"])("div",le,[Object(a["I"])(c).info.stops.length?(Object(a["u"])(),Object(a["f"])(a["a"],{key:0},[Object(a["g"])("div",ie,Object(a["G"])(Object(a["I"])(c).info.stops.length)+" пересадки",1),Object(a["g"])("div",null,Object(a["G"])(Object(a["I"])(c).info.stops.join(", ")),1)],64)):(Object(a["u"])(),Object(a["f"])("div",ue,"Без пересадок"))])])]),_:1}))}});c("944f");const de=l()(se,[["__scopeId","data-v-edb4f382"]]);var be=de;const re=[{text:"Без пересадок",value:0},{text:"1 пересадка",value:1},{text:"2 пересадки",value:2},{text:"3 пересадки",value:3}],je=Object(a["A"])([]),Oe={id:"stopNumber",name:"stopNumber",title:"Количество пересадок",options:re},pe=()=>{function e(e){je.value=e}return{stopNumberParams:Object(a["z"])(Oe),stopNumberSelected:Object(a["z"])(je),updateStopNumber:e}};var ve=pe;const{companies:fe}=P(),me=Object(a["b"])(()=>[{text:"Все",value:"all"},...fe.value.map(e=>({text:e.name,value:e.id}))]),_e=Object(a["A"])("all"),he=Object(a["b"])(()=>({id:"company",name:"company",title:"Компания",options:me.value})),ge=()=>{function e(e){_e.value=e}return{companyParams:Object(a["z"])(he),companySelected:Object(a["z"])(_e),updateCompany:e}};var ke=ge;const Ie={class:"subheading mb1"};var ye=Object(a["j"])({__name:"TicketFilterCard",props:{title:null},setup(e){const t=e,{title:c}=Object(a["H"])(t);return(e,t)=>(Object(a["u"])(),Object(a["d"])(T,{class:"ticket-filter-card"},{default:Object(a["N"])(()=>[Object(a["g"])("div",Ie,Object(a["G"])(Object(a["I"])(c)),1),Object(a["C"])(e.$slots,"default")]),_:3}))}});c("6d06");const Te=l()(ye,[["__scopeId","data-v-39cda7d9"]]);var Se=Te;const xe=["for"],Ae=["id","name","value","checked"],Ve={class:"app-checkbox__label"};var Ne=Object(a["j"])({__name:"AppCheckbox",props:{id:null,name:null,label:null,value:null,modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{id:n,name:o,label:l,value:i,modelValue:u}=Object(a["H"])(c),s=Object(a["b"])(()=>String(null===i||void 0===i?void 0:i.value)),d=Object(a["b"])(()=>Array.isArray(u.value)?u.value.some(e=>String(e)===s.value):u.value);function b(e){const{target:c}=e,a=c.checked;let n;n=Array.isArray(u.value)?a?[...u.value,null===i||void 0===i?void 0:i.value]:[...u.value].filter(e=>String(e)!==s.value):null===i||void 0===i?void 0:i.value,t("update:modelValue",n)}return(e,t)=>(Object(a["u"])(),Object(a["f"])("label",{for:Object(a["I"])(n),class:Object(a["p"])(["app-checkbox",{"app-checkbox--checked":Object(a["I"])(d)}])},[Object(a["g"])("input",{type:"checkbox",id:Object(a["I"])(n),name:Object(a["I"])(o),value:Object(a["I"])(i),checked:Object(a["I"])(d),onChange:b},null,40,Ae),Object(a["g"])("span",{class:Object(a["p"])(["app-checkbox__control","mdi","mdi-checkbox-"+(Object(a["I"])(d)?"marked":"blank-outline")])},null,2),Object(a["g"])("span",Ve,Object(a["G"])(Object(a["I"])(l)),1)],10,xe))}});c("c6c0");const we=l()(Ne,[["__scopeId","data-v-238b46b6"]]);var De=we;const Ce=["for"],Ee=["id","name","value","checked"],Me={class:"app-radio__label"};var Le=Object(a["j"])({__name:"AppRadio",props:{id:null,name:null,label:null,value:null,modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{id:n,name:o,label:l,value:i,modelValue:u}=Object(a["H"])(c),s=Object(a["b"])(()=>String(i.value)===String(u.value));function d(){t("update:modelValue",i.value)}return(e,t)=>(Object(a["u"])(),Object(a["f"])("label",{for:Object(a["I"])(n),class:Object(a["p"])(["app-radio",{"app-radio--checked":Object(a["I"])(s)}])},[Object(a["g"])("input",{type:"radio",id:Object(a["I"])(n),name:Object(a["I"])(o),value:Object(a["I"])(i),checked:Object(a["I"])(s),onChange:d},null,40,Ee),Object(a["g"])("span",{class:Object(a["p"])(["app-radio__control","mdi","mdi-radiobox-"+(Object(a["I"])(s)?"marked":"blank")])},null,2),Object(a["g"])("span",Me,Object(a["G"])(Object(a["I"])(l)),1)],10,Ce))}});c("6c4b");const $e=l()(Le,[["__scopeId","data-v-e87525fc"]]);var Be=$e;const He={class:"app-list"};function Pe(e,t){return Object(a["u"])(),Object(a["f"])("div",He,[Object(a["C"])(e.$slots,"default")])}const ze={},Ge=l()(ze,[["render",Pe]]);var Fe=Ge;const Ue={class:"app-list-item px2 py1"};function Re(e,t){return Object(a["u"])(),Object(a["f"])("div",Ue,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])}c("890d");const Ke={},Je=l()(Ke,[["render",Re],["__scopeId","data-v-032bb1d4"]]);var We=Je;const qe={class:"ticket-filter"};var Qe=Object(a["j"])({__name:"TicketFilter",setup(e){const{stopNumberParams:t,stopNumberSelected:c,updateStopNumber:n}=ve(),{companyParams:o,companySelected:l,updateCompany:i}=ke();return(e,u)=>(Object(a["u"])(),Object(a["f"])("div",qe,[Object(a["i"])(Se,{class:"mb2 shadow-3",title:Object(a["I"])(t).title},{default:Object(a["N"])(()=>[Object(a["i"])(Fe,{class:"mxn2"},{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(t).options,(e,o)=>(Object(a["u"])(),Object(a["d"])(We,{key:o},{default:Object(a["N"])(()=>[Object(a["i"])(De,{class:"block mxn2 px2 myn1 py1",id:`${Object(a["I"])(t).id}-${o}`,value:e.value,label:e.text,name:Object(a["I"])(t).name,"model-value":Object(a["I"])(c),"onUpdate:modelValue":Object(a["I"])(n)},null,8,["id","value","label","name","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"]),Object(a["i"])(Se,{class:"mb2 shadow-3",title:Object(a["I"])(o).title},{default:Object(a["N"])(()=>[Object(a["i"])(Fe,{class:"mxn2"},{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(o).options,(e,t)=>(Object(a["u"])(),Object(a["d"])(We,{key:t},{default:Object(a["N"])(()=>[Object(a["i"])(Be,{class:"block mxn2 px2 myn1 py1",id:`${Object(a["I"])(o).id}-${t}`,value:e.value,label:e.text,name:"company","model-value":Object(a["I"])(l),"onUpdate:modelValue":Object(a["I"])(i)},null,8,["id","value","label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"])]))}});const Xe=Qe;var Ye,Ze=Xe;(function(e){e["MOW"]="MOW",e["HKT"]="HKT",e["HKG"]="HKG",e["JNB"]="JNB",e["PTB"]="PTB",e["ARH"]="ARH",e["TRN"]="TRN",e["KRS"]="KRS",e["SRT"]="SRT",e["LOS"]="LOS",e["EKV"]="EKV",e["EKT"]="EKT"})(Ye||(Ye={}));var et=c("7677");const tt=Object.keys(Ye).map(e=>({text:e,value:e})),ct=Object(a["A"])({from:void 0,to:void 0}),at=Object(a["A"])({there:void 0,back:void 0}),nt=()=>{function e(e){ct.value=e}function t(e){at.value=e}return Object(a["M"])(()=>{at.value.back&&at.value.there&&Object(et["a"])(at.value.back,at.value.there)&&t({...at.value,back:void 0})}),{directionOptions:tt,directionSelected:Object(a["z"])(ct),updateDirection:e,datesSelected:Object(a["z"])(at),updateDates:t}};var ot=nt;const lt={class:"app-input"};function it(e,t){return Object(a["u"])(),Object(a["f"])("div",lt,[Object(a["C"])(e.$slots,"label",{},void 0,!0),Object(a["C"])(e.$slots,"default",{},void 0,!0)])}c("77ab");const ut={},st=l()(ut,[["render",it],["__scopeId","data-v-2dc20720"]]);var dt=st;const bt=["name","value","placeholder","disabled"],rt={key:0,class:"app-select__dropdown shadow-3"};var jt=Object(a["j"])({__name:"AppSelect",props:{name:null,placeholder:null,disabled:{type:Boolean},modelValue:null,options:null,clearable:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{name:n,placeholder:o,disabled:l,modelValue:i,options:u,clearable:s=!1}=Object(a["H"])(c),d=Object(a["A"])(!1),b=Object(a["b"])(()=>{var e;return(null===(e=u.value.find(e=>e.value===(null===i||void 0===i?void 0:i.value)))||void 0===e?void 0:e.text)||""});function r(){d.value=!0}function j(){d.value=!1}function O(e){j(),t("update:modelValue",e)}function p(){t("update:modelValue",void 0)}return document.addEventListener("click",j),Object(a["r"])(()=>{document.removeEventListener("click",j)}),(e,t)=>(Object(a["u"])(),Object(a["d"])(dt,{class:"app-select"},{default:Object(a["N"])(()=>[Object(a["g"])("input",{name:Object(a["I"])(n),value:Object(a["I"])(b),placeholder:Object(a["I"])(o),disabled:!!Object(a["I"])(l),readonly:"",onFocus:r,onClick:t[0]||(t[0]=Object(a["P"])(()=>{},["stop"]))},null,40,bt),d.value?(Object(a["u"])(),Object(a["f"])("div",rt,[Object(a["i"])(Fe,null,{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(u),e=>(Object(a["u"])(),Object(a["d"])(We,{class:Object(a["p"])(["app-select__option cursor-pointer",{selected:Object(a["I"])(i)===e.value,disabled:e.disabled}]),key:e.value,onClick:t=>!e.disabled&&O(e.value)},{default:Object(a["N"])(()=>[Object(a["h"])(Object(a["G"])(e.text),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})])):Object(a["e"])("",!0),Object(a["I"])(s)&&Object(a["I"])(i)?(Object(a["u"])(),Object(a["f"])("span",{key:1,class:"app-select__close mdi mdi-close cursor-pointer",onClick:p})):Object(a["e"])("",!0)]),_:1}))}});c("c451");const Ot=l()(jt,[["__scopeId","data-v-25d3fd06"]]);var pt=Ot;const vt=["type"];var ft=Object(a["j"])({__name:"AppButton",props:{type:null,color:null,label:null,outlined:{type:Boolean},stretch:{type:Boolean}},setup(e){const t=e,{type:c,color:n,label:o,outlined:l,stretch:i}=Object(a["H"])(t);return(e,t)=>(Object(a["u"])(),Object(a["f"])("button",{class:Object(a["p"])(["app-button","subheading",Object(a["I"])(n),{outlined:Object(a["I"])(l),stretch:Object(a["I"])(i)}]),type:Object(a["I"])(c)||"button"},[Object(a["C"])(e.$slots,"default",{},()=>[Object(a["h"])(Object(a["G"])(Object(a["I"])(o)),1)])],10,vt))}});c("286a");const mt=l()(ft,[["__scopeId","data-v-11e1dff5"]]);var _t=mt;const ht=e=>(Object(a["x"])("data-v-2bf25440"),e=e(),Object(a["v"])(),e),gt={class:"ticket-search-direction"},kt=ht(()=>Object(a["g"])("span",{class:"mdi mdi-swap-horizontal"},null,-1));var It=Object(a["j"])({__name:"TicketSearchDirection",setup(e){const{directionOptions:t,directionSelected:c,updateDirection:n}=ot(),o=Object(a["b"])(()=>t.map(e=>({...e,disabled:e.value===c.value.to}))),l=Object(a["b"])(()=>t.map(e=>({...e,disabled:e.value===c.value.from})));function i(){n({from:c.value.to,to:c.value.from})}function u(e,t){n({...c.value,[e]:t})}return(e,t)=>(Object(a["u"])(),Object(a["f"])("div",gt,[Object(a["i"])(pt,{class:"ticket-search-direction__input shadow-3",placeholder:"Откуда","model-value":Object(a["I"])(c).from,options:Object(a["I"])(o),"onUpdate:modelValue":t[0]||(t[0]=e=>u("from",e)),clearable:""},null,8,["model-value","options"]),Object(a["i"])(pt,{class:"ticket-search-direction__input shadow-3",placeholder:"Куда","model-value":Object(a["I"])(c).to,options:Object(a["I"])(l),"onUpdate:modelValue":t[1]||(t[1]=e=>u("to",e)),clearable:""},null,8,["model-value","options"]),Object(a["i"])(_t,{class:"ticket-search-direction__swap shadow-3",onClick:i},{default:Object(a["N"])(()=>[kt]),_:1})]))}});c("974b");const yt=l()(It,[["__scopeId","data-v-2bf25440"]]);var Tt=yt,St=c("ad53"),xt=c("24e7");const At=e=>(Object(a["x"])("data-v-5a3e9ff8"),e=e(),Object(a["v"])(),e),Vt=At(()=>Object(a["g"])("span",{class:"app-datepicker__icon mdi mdi-calendar-today"},null,-1));var Nt=Object(a["j"])({__name:"AppDatepicker",props:{name:null,placeholder:null,disabled:{type:Boolean},modelValue:null,clearable:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{name:n,placeholder:o,modelValue:l,disabled:i,clearable:u=!1}=Object(a["H"])(c);function s(e){t("update:modelValue",e)}function d(){t("update:modelValue",void 0)}return(e,t)=>(Object(a["u"])(),Object(a["d"])(dt,{class:"app-datepicker"},{default:Object(a["N"])(()=>[Object(a["i"])(Object(a["I"])(xt["a"]),Object(a["n"])({class:"app-datepicker__control",name:Object(a["I"])(n),placeholder:Object(a["I"])(o),locale:Object(a["I"])(St["a"]),"weekday-format":"EEEEEE","input-format":"d MMMM, EEEEEE","model-value":Object(a["I"])(l),"onUpdate:modelValue":s,disabled:Object(a["I"])(i)},e.$attrs),null,16,["name","placeholder","locale","model-value","disabled"]),Vt,Object(a["I"])(u)&&Object(a["I"])(l)?(Object(a["u"])(),Object(a["f"])("span",{key:0,class:"app-datepicker__close mdi mdi-close cursor-pointer",onClick:d})):Object(a["e"])("",!0)]),_:1}))}});c("23c8");const wt=l()(Nt,[["__scopeId","data-v-5a3e9ff8"]]);var Dt=wt;const Ct={class:"ticket-search-dates"};var Et=Object(a["j"])({__name:"TicketSearchDates",setup(e){const{datesSelected:t,updateDates:c}=ot();function n(e,a){c({...t.value,[a]:e})}return(e,c)=>(Object(a["u"])(),Object(a["f"])("div",Ct,[Object(a["i"])(Dt,{class:"ticket-search-dates__control shadow-3",placeholder:"Когда","model-value":Object(a["I"])(t).there,"onUpdate:modelValue":c[0]||(c[0]=e=>n(e,"there")),clearable:""},null,8,["model-value"]),Object(a["i"])(Dt,{class:"ticket-search-dates__control shadow-3","model-value":Object(a["I"])(t).back,placeholder:"Обратно","onUpdate:modelValue":c[1]||(c[1]=e=>n(e,"back")),clearable:"","lower-limit":Object(a["I"])(t).there},null,8,["model-value","lower-limit"])]))}});c("d17b");const Mt=l()(Et,[["__scopeId","data-v-bb4e0434"]]);var Lt=Mt;const $t={class:"ticket-search"};var Bt=Object(a["j"])({__name:"TicketSearch",setup(e){return(e,t)=>(Object(a["u"])(),Object(a["f"])("div",$t,[Object(a["i"])(Tt,{class:"ticket-search__direction"}),Object(a["i"])(Lt)]))}});c("a202");const Ht=l()(Bt,[["__scopeId","data-v-0be7553e"]]);var Pt=Ht;const zt=[{text:"Самый дешевый",value:"cheapest"},{text:"Самый быстрый",value:"fastest"},{text:"Оптимальный",value:"optimal"}],Gt="cheapest";var Ft=Object(a["j"])({__name:"AppButtonToggle",props:{options:null,stretch:{type:Boolean},modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{options:n}=Object(a["H"])(c);function o(e){t("update:modelValue",e)}return(t,c)=>(Object(a["u"])(),Object(a["f"])("div",{class:Object(a["p"])(["app-button-toggle",{stretch:e.stretch}])},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(n),(t,c)=>(Object(a["u"])(),Object(a["d"])(_t,{class:"app-button-toggle__item",key:c,color:t.value===e.modelValue?"primary":void 0,outlined:t.value!==e.modelValue,onClick:e=>o(t.value)},{default:Object(a["N"])(()=>[Object(a["h"])(Object(a["G"])(t.text),1)]),_:2},1032,["color","outlined","onClick"]))),128))],2))}});c("64a8");const Ut=l()(Ft,[["__scopeId","data-v-49f7f22a"]]);var Rt=Ut;const Kt=Object(a["A"])(Gt),Jt=()=>{function e(e){Kt.value=e}return{sortingMode:Object(a["z"])(Kt),updateSortingMode:e}};var Wt=Jt,qt=Object(a["j"])({__name:"TicketSorting",setup(e){const{sortingMode:t,updateSortingMode:c}=Wt();function n(e){c(e)}return(e,c)=>(Object(a["u"])(),Object(a["d"])(Rt,{stretch:"",options:Object(a["I"])(zt),"model-value":Object(a["I"])(t),"onUpdate:modelValue":n},null,8,["options","model-value"]))}});const Qt=qt;var Xt=Qt,Yt=Object(a["j"])({__name:"PaginationButton",props:{modelValue:null,step:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{modelValue:n,step:o}=Object(a["H"])(c);function l(){t("update:modelValue",n.value+o.value)}return(e,t)=>(Object(a["u"])(),Object(a["d"])(_t,Object(a["n"])(e.$attrs,{onClick:l}),{default:Object(a["N"])(()=>[Object(a["C"])(e.$slots,"default")]),_:3},16))}});const Zt=Yt;var ec=Zt;const tc=Object(S["a"])({id:"ticketMachine",initial:"iddle",states:{...A}}),cc=Object(x["a"])(tc);c("caad"),c("13d5"),c("d9e2");const ac=()=>E.get("/163b5e66df9f2741243e").then(e=>e.data);var nc={fetchTickets:ac},oc=c("1ba4");const lc=(e,{dateThere:t,directionFrom:c,directionTo:a})=>e.filter(e=>{let n=!0;const{origin:o,destination:l,dateStart:i}=e.info;return n&&c&&(n=o===c),n&&a&&(n=l===a),n&&t&&(n=Object(oc["a"])(i,t)),n}),ic=(e,{dates:t,direction:c})=>{const a=lc(e,{dateThere:t.there,directionFrom:c.from,directionTo:c.to}),n=t.back&&c.from&&c.to?lc(e,{dateThere:t.back,directionFrom:c.to,directionTo:c.from}):[],o=[...a,...n];return o},uc=(e,{stopNumbers:t,company:c})=>e.filter(e=>{const{companyId:a}=e,{stops:n}=e.info;return(0===t.length||t.includes(n.length))&&(!c||"all"===c||a===c)}),sc=e=>e.sort((e,t)=>e.price-t.price),dc=e=>e.sort((e,t)=>e.info.duration-t.info.duration),bc=e=>{const t=e.reduce(({priceSum:e,durationSum:t},c)=>{const{info:a,price:n}=c;return{priceSum:e+n,durationSum:t+a.duration}},{priceSum:0,durationSum:0}),c=t.priceSum/e.length,a=t.durationSum/e.length;return e.sort((e,t)=>e.info.stops.length<t.info.stops.length?e.price<c||e.info.duration<a?-1:1:e.info.stops.length>t.info.stops.length?t.price<c||t.info.duration<a?1:-1:e.price-t.price)},rc=(e,t)=>{if("cheapest"===t)return sc(e);if("fastest"===t)return dc(e);if("optimal"===t)return bc(e);throw new Error("there is no such sorting mode")},jc=async()=>{cc.send("LOAD_DATA");try{const e=await nc.fetchTickets(),t=e.map(e=>({...e,info:{...e.info,dateStart:new Date(e.info.dateStart),dateEnd:new Date(e.info.dateEnd)}}));return cc.send(t.length>0?"DATA_LOADED":"FAIL"),t}catch(e){throw cc.send("FAIL"),e}};var Oc={findTickets:ic,filterTickets:uc,sortTickets:rc,loadTickets:jc};const pc=Object(a["A"])([]),vc=Object(a["A"])(tc.initialState.value);cc.onTransition(e=>{vc.value=e.value}).start();const fc=({direction:e,dates:t,stopNumbers:c,company:n,sorting:o,count:l})=>{const i=Object(a["b"])(()=>Oc.findTickets(pc.value,{dates:t.value,direction:e.value})),u=Object(a["b"])(()=>Oc.filterTickets(i.value,{stopNumbers:[...c.value],company:n.value})),s=Object(a["b"])(()=>Oc.sortTickets(u.value,o.value)),d=Object(a["b"])(()=>s.value.slice(0,l.value)),b=e=>{pc.value=e},r=async()=>{if("loading"===vc.value)return;const e=await Oc.loadTickets();b(e)};return"iddle"===vc.value&&r(),{tickets:Object(a["z"])(pc),ticketsFound:Object(a["z"])(i),ticketsFiltered:Object(a["z"])(u),ticketsSorted:Object(a["z"])(s),ticketsPaginated:Object(a["z"])(d),updateTickets:b,loadTickets:r,state:Object(a["z"])(vc)}};var mc=fc;const _c=e=>(Object(a["x"])("data-v-2ec33bd6"),e=e(),Object(a["v"])(),e),hc=_c(()=>Object(a["g"])("hr",null,null,-1)),gc={class:"clearfix mxn1"},kc={class:"md-col md-col-4 px1"},Ic={class:"md-col md-col-8 px1"},yc=Object(a["h"])("loading..."),Tc=Object(a["h"])(" Что-то пошло не так. Попробуйте перезагрузить страницу "),Sc=Object(a["h"])(" Показать еще 5 билетов "),xc=Object(a["h"])("Мы не нашли подходящих билетов. Попробуйте изменить условия поиска.");var Ac=Object(a["j"])({__name:"TicketPage",setup(e){const t=5,{stopNumberSelected:c}=ve(),{companySelected:n}=ke(),{directionSelected:o,datesSelected:l}=ot(),{sortingMode:i}=Wt(),u=Object(a["A"])(t),{ticketsFiltered:s,ticketsPaginated:d,state:b}=mc({stopNumbers:c,company:n,direction:o,dates:l,sorting:i,count:Object(a["z"])(u)});return Object(a["L"])([c,n,o,l,i],()=>{u.value=t}),(e,c)=>{const n=Object(a["D"])("temlate");return Object(a["u"])(),Object(a["d"])(h,{class:"ticket-page"},{default:Object(a["N"])(()=>[Object(a["i"])(Pt),hc,Object(a["g"])("div",gc,[Object(a["g"])("div",kc,[Object(a["i"])(Ze)]),Object(a["g"])("div",Ic,[Object(a["i"])(Xt,{class:"mb2"}),"loading"===Object(a["I"])(b)?(Object(a["u"])(),Object(a["f"])(a["a"],{key:0},[yc],64)):Object(a["e"])("",!0),"failure"===Object(a["I"])(b)?(Object(a["u"])(),Object(a["f"])(a["a"],{key:1},[Tc],64)):Object(a["e"])("",!0),"ready"===Object(a["I"])(b)?(Object(a["u"])(),Object(a["f"])(a["a"],{key:2},[Object(a["I"])(d).length>0?(Object(a["u"])(),Object(a["d"])(n,{key:0},{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(d),e=>(Object(a["u"])(),Object(a["d"])(be,{key:e.id,"ticket-data":e,class:"mb2"},null,8,["ticket-data"]))),128)),Object(a["I"])(s).length>u.value?(Object(a["u"])(),Object(a["d"])(ec,{key:0,modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=e=>u.value=e),step:t,class:"block",color:"primary",stretch:""},{default:Object(a["N"])(()=>[Sc]),_:1},8,["modelValue"])):Object(a["e"])("",!0)]),_:1})):(Object(a["u"])(),Object(a["f"])(a["a"],{key:1},[xc],64))],64)):Object(a["e"])("",!0)])])]),_:1})}}});c("5ddb");const Vc=l()(Ac,[["__scopeId","data-v-2ec33bd6"]]);var Nc=Vc;const wc=[{path:"/",name:"TicketPage",component:Nc}],Dc=Object(d["a"])({history:Object(d["b"])("/aviaticket/"),routes:wc});var Cc=Dc,Ec=c("5502"),Mc=Object(Ec["a"])({state:{},mutations:{},actions:{},modules:{}});c("208c"),c("b5cc"),c("fb98");Object(a["c"])(s).use(Mc).use(Cc).mount("#app")},d09f:function(e,t,c){"use strict";c("cbe1")},d17b:function(e,t,c){"use strict";c("80b7")},f060:function(e,t,c){},f066:function(e,t,c){"use strict";c("9e0b")},f8a5:function(e,t,c){},fb98:function(e,t,c){}});
//# sourceMappingURL=app.51db4abe.js.map