(function(e){function t(t){for(var a,l,i=t[0],s=t[1],u=t[2],b=0,r=[];b<i.length;b++)l=i[b],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&r.push(o[l][0]),o[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(r.length)r.shift()();return n.push.apply(n,u||[]),c()}function c(){for(var e,t=0;t<n.length;t++){for(var c=n[t],a=!0,i=1;i<c.length;i++){var s=c[i];0!==o[s]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=c[0]))}return e}var a={},o={app:0},n=[];function l(t){if(a[t])return a[t].exports;var c=a[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=e,l.c=a,l.d=function(e,t,c){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(c,a,function(t){return e[t]}.bind(null,a));return c},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/aviaticket/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=s;n.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"0fea":function(e,t,c){},"217d":function(e,t,c){},2518:function(e,t,c){},"286a":function(e,t,c){"use strict";c("f8a5")},"2ec1":function(e,t,c){"use strict";c("ad23")},"3c98":function(e,t,c){},4063:function(e,t,c){"use strict";c("0fea")},"40b1":function(e,t,c){"use strict";c("da38")},4739:function(e,t,c){"use strict";c("3c98")},"514a":function(e,t,c){},"5be9":function(e,t,c){},"64a8":function(e,t,c){"use strict";c("b0ec")},"6c4b":function(e,t,c){"use strict";c("5be9")},7372:function(e,t,c){},"77ab":function(e,t,c){"use strict";c("514a")},"890d":function(e,t,c){"use strict";c("7372")},"9b19":function(e,t,c){e.exports=c.p+"img/logo.ee84f7c2.svg"},"9e0b":function(e,t,c){},ad23:function(e,t,c){},b0ec:function(e,t,c){},b1f2:function(e,t,c){"use strict";c("cb6c")},b392:function(e,t,c){},bbf3:function(e,t,c){},c6c0:function(e,t,c){"use strict";c("b392")},c897:function(e,t,c){"use strict";c("2518")},cb6c:function(e,t,c){},cbe1:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var a=c("7a23");function o(e,t){const c=Object(a["D"])("router-view");return Object(a["u"])(),Object(a["d"])(c)}var n=c("6b0d"),l=c.n(n);const i={},s=l()(i,[["render",o]]);var u=s,d=c("6605"),b=c("9b19"),r=c.n(b);const j=e=>(Object(a["x"])("data-v-0a03cfe0"),e=e(),Object(a["v"])(),e),O={class:"base-layout"},p=j(()=>Object(a["g"])("div",{class:"center mt05 mb1"},[Object(a["g"])("img",{alt:"Vue logo",src:r.a})],-1)),v={class:"container"};function m(e,t){return Object(a["u"])(),Object(a["f"])("div",O,[p,Object(a["g"])("div",v,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])])}c("f066");const f={},h=l()(f,[["render",m],["__scopeId","data-v-0a03cfe0"]]);var _=h;const g={class:"app-sheet p2 rounded"};function k(e,t){return Object(a["u"])(),Object(a["f"])("div",g,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])}c("d09f");const I={},y=l()(I,[["render",k],["__scopeId","data-v-20104a10"]]);var T=y,D=c("1b5e"),A=c("2cb2");const x={iddle:{on:{LOAD_DATA:"loading"}},loading:{on:{DATA_LOADED:"ready",FAIL:"failure",RESET:"iddle"}},ready:{on:{LOAD_DATA:"loading",RESET:"iddle"}},failure:{on:{LOAD_DATA:"loading",RESET:"iddle"}}},S=Object(D["a"])({id:"companyMachine",initial:"iddle",states:x}),w=Object(A["a"])(S);var C=c("bc3a"),V=c.n(C);const N=V.a.create({baseURL:"https://api.npoint.io",headers:{"Content-Type":"application/json"}});var E=N;const L=()=>E.get("/a1b1c28b32d9785bb26c").then(e=>e.data);var B={fetchCompanies:L};const M=(e,{id:t,name:c,logo:a})=>{const{id:o,name:n,logo:l}=e;return(!t||o===t)&&((!c||n===c)&&(!a||l===a))},$=e=>e.logo,P=Object(a["A"])([]),z=Object(a["A"])(S.initialState.value);w.onTransition(e=>{z.value=e.value}).start();const U=()=>{const e=e=>{P.value=e},t=async()=>{if("loading"!==z.value){w.send("LOAD_DATA");try{const t=await B.fetchCompanies(),c=t.map(e=>({...e,logo:"/aviaticket/img/companies/"+e.logo}));e(c),w.send(c.length>0?"DATA_LOADED":"NOTHING_LOADED")}catch{w.send("FAILURE")}}},c=e=>{const t=P.value.find(t=>M(t,{id:e}));return t?$(t):""};return"iddle"===z.value&&t(),{companies:Object(a["z"])(P),loadCompanies:t,updateCompanies:e,getLogoByCompanyId:c,state:Object(a["z"])(z)}};var H=U;const G={mounted(e){const t=e.innerHTML;e.innerHTML=t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}};var F=G;const R=6e4,K=60,J=R*K,W=e=>{const t=Math.floor(e/J),c=Math.floor(e/R)%K;return`${t}ч ${c}м`},q=e=>`${e.getDate()}.${e.getMonth()+1}  ${e.getHours()}:${e.getMinutes()}`,Q=e=>(Object(a["x"])("data-v-0f0776cf"),e=e(),Object(a["v"])(),e),X={class:"ticket-card__top flex items-center justify-between mb2"},Y={class:"ticket-card__price h3 line-height-1"},Z={class:"ticket-card__company"},ee={class:"block"},te=["srcset"],ce=["src"],ae={class:"ticket-card__bottom flex items-center justify-between"},oe={class:"ticket-card__route col-4"},ne={class:"subheading text-muted"},le={class:"ticket-card__duration col-4"},ie=Q(()=>Object(a["g"])("div",{class:"subheading text-muted"},"В пути",-1)),se={class:"ticket-card__stops col-4"},ue={class:"subheading text-muted"},de={key:1,class:"subheading text-muted"};var be=Object(a["j"])({__name:"TicketCard",props:{ticketData:null},setup(e){const t=e,{ticketData:c}=Object(a["H"])(t),{getLogoByCompanyId:o}=H(),n=Object(a["b"])(()=>o(c.value.companyId)),l=Object(a["b"])(()=>W(c.value.info.duration)),i=Object(a["b"])(()=>`${q(c.value.info.dateStart)} – ${q(c.value.info.dateEnd)}`);return(e,t)=>(Object(a["u"])(),Object(a["d"])(T,{class:"ticket-card shadow-3"},{default:Object(a["N"])(()=>[Object(a["g"])("div",X,[Object(a["O"])((Object(a["u"])(),Object(a["f"])("div",Y,[Object(a["h"])(Object(a["G"])(Object(a["I"])(c).price)+" Р",1)])),[[Object(a["I"])(F)]]),Object(a["g"])("div",Z,[Object(a["g"])("picture",ee,[Object(a["g"])("source",{srcset:Object(a["I"])(n)},null,8,te),Object(a["g"])("img",{src:Object(a["I"])(n)},null,8,ce)])])]),Object(a["g"])("div",ae,[Object(a["g"])("div",oe,[Object(a["g"])("div",ne,Object(a["G"])(Object(a["I"])(c).info.origin)+" – "+Object(a["G"])(Object(a["I"])(c).info.destination),1),Object(a["g"])("div",null,Object(a["G"])(Object(a["I"])(i)),1)]),Object(a["g"])("div",le,[ie,Object(a["g"])("div",null,Object(a["G"])(Object(a["I"])(l)),1)]),Object(a["g"])("div",se,[Object(a["I"])(c).info.stops.length?(Object(a["u"])(),Object(a["f"])(a["a"],{key:0},[Object(a["g"])("div",ue,Object(a["G"])(Object(a["I"])(c).info.stops.length)+" пересадки",1),Object(a["g"])("div",null,Object(a["G"])(Object(a["I"])(c).info.stops.join(", ")),1)],64)):(Object(a["u"])(),Object(a["f"])("div",de,"Без пересадок"))])])]),_:1}))}});c("f937");const re=l()(be,[["__scopeId","data-v-0f0776cf"]]);var je=re;const Oe=[{text:"Без пересадок",value:0},{text:"1 пересадка",value:1},{text:"2 пересадки",value:2},{text:"3 пересадки",value:3}],pe=Object(a["A"])([]),ve={id:"stopNumber",name:"stopNumber",title:"Количество пересадок",options:Oe},me=()=>{function e(e){pe.value=e}return{stopNumberParams:Object(a["z"])(ve),stopNumberSelected:Object(a["z"])(pe),updateStopNumber:e}};var fe=me;const{companies:he}=H(),_e=Object(a["b"])(()=>[{text:"Все",value:"all"},...he.value.map(e=>({text:e.name,value:e.id}))]),ge=Object(a["A"])("all"),ke=Object(a["b"])(()=>({id:"company",name:"company",title:"Компания",options:_e.value})),Ie=()=>{function e(e){ge.value=e}return{companyParams:Object(a["z"])(ke),companySelected:Object(a["z"])(ge),updateCompany:e}};var ye=Ie;const Te=["for"],De=["id","name","value","checked"],Ae={class:"app-checkbox__label"};var xe=Object(a["j"])({__name:"AppCheckbox",props:{id:null,name:null,label:null,value:null,modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{id:o,name:n,label:l,value:i,modelValue:s}=Object(a["H"])(c),u=Object(a["b"])(()=>String(null===i||void 0===i?void 0:i.value)),d=Object(a["b"])(()=>Array.isArray(s.value)?s.value.some(e=>String(e)===u.value):s.value);function b(e){const{target:c}=e,a=c.checked;let o;o=Array.isArray(s.value)?a?[...s.value,null===i||void 0===i?void 0:i.value]:[...s.value].filter(e=>String(e)!==u.value):null===i||void 0===i?void 0:i.value,t("update:modelValue",o)}return(e,t)=>(Object(a["u"])(),Object(a["f"])("label",{for:Object(a["I"])(o),class:Object(a["p"])(["app-checkbox",{"app-checkbox--checked":Object(a["I"])(d)}])},[Object(a["g"])("input",{type:"checkbox",id:Object(a["I"])(o),name:Object(a["I"])(n),value:Object(a["I"])(i),checked:Object(a["I"])(d),onChange:b},null,40,De),Object(a["g"])("span",{class:Object(a["p"])(["app-checkbox__control","mdi","mdi-checkbox-"+(Object(a["I"])(d)?"marked":"blank-outline")])},null,2),Object(a["g"])("span",Ae,Object(a["G"])(Object(a["I"])(l)),1)],10,Te))}});c("c6c0");const Se=l()(xe,[["__scopeId","data-v-238b46b6"]]);var we=Se;const Ce=["for"],Ve=["id","name","value","checked"],Ne={class:"app-radio__label"};var Ee=Object(a["j"])({__name:"AppRadio",props:{id:null,name:null,label:null,value:null,modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{id:o,name:n,label:l,value:i,modelValue:s}=Object(a["H"])(c),u=Object(a["b"])(()=>String(i.value)===String(s.value));function d(){t("update:modelValue",i.value)}return(e,t)=>(Object(a["u"])(),Object(a["f"])("label",{for:Object(a["I"])(o),class:Object(a["p"])(["app-radio",{"app-radio--checked":Object(a["I"])(u)}])},[Object(a["g"])("input",{type:"radio",id:Object(a["I"])(o),name:Object(a["I"])(n),value:Object(a["I"])(i),checked:Object(a["I"])(u),onChange:d},null,40,Ve),Object(a["g"])("span",{class:Object(a["p"])(["app-radio__control","mdi","mdi-radiobox-"+(Object(a["I"])(u)?"marked":"blank")])},null,2),Object(a["g"])("span",Ne,Object(a["G"])(Object(a["I"])(l)),1)],10,Ce))}});c("6c4b");const Le=l()(Ee,[["__scopeId","data-v-e87525fc"]]);var Be=Le;const Me={class:"app-list"};function $e(e,t){return Object(a["u"])(),Object(a["f"])("div",Me,[Object(a["C"])(e.$slots,"default")])}const Pe={},ze=l()(Pe,[["render",$e]]);var Ue=ze;const He={class:"app-list-item px2 py1"};function Ge(e,t){return Object(a["u"])(),Object(a["f"])("div",He,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])}c("890d");const Fe={},Re=l()(Fe,[["render",Ge],["__scopeId","data-v-032bb1d4"]]);var Ke=Re;const Je={class:"subheading mb1"};var We=Object(a["j"])({__name:"TicketFilterCard",props:{title:null},setup(e){const t=e,{title:c}=Object(a["H"])(t);return(e,t)=>(Object(a["u"])(),Object(a["d"])(T,{class:"ticket-filter-card"},{default:Object(a["N"])(()=>[Object(a["g"])("div",Je,Object(a["G"])(Object(a["I"])(c)),1),Object(a["C"])(e.$slots,"default")]),_:3}))}});c("c897");const qe=l()(We,[["__scopeId","data-v-e519c518"]]);var Qe=qe;const Xe={class:"ticket-filter"};var Ye=Object(a["j"])({__name:"TicketFilter",setup(e){const{stopNumberParams:t,stopNumberSelected:c,updateStopNumber:o}=fe(),{companyParams:n,companySelected:l,updateCompany:i}=ye();return(e,s)=>(Object(a["u"])(),Object(a["f"])("div",Xe,[Object(a["i"])(Qe,{class:"mb2 shadow-3",title:Object(a["I"])(t).title},{default:Object(a["N"])(()=>[Object(a["i"])(Ue,{class:"mxn2"},{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(t).options,(e,n)=>(Object(a["u"])(),Object(a["d"])(Ke,{key:n},{default:Object(a["N"])(()=>[Object(a["i"])(we,{class:"block mxn2 px2 myn1 py1",id:`${Object(a["I"])(t).id}-${n}`,value:e.value,label:e.text,name:Object(a["I"])(t).name,"model-value":Object(a["I"])(c),"onUpdate:modelValue":Object(a["I"])(o)},null,8,["id","value","label","name","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"]),Object(a["i"])(Qe,{class:"mb2 shadow-3",title:Object(a["I"])(n).title},{default:Object(a["N"])(()=>[Object(a["i"])(Ue,{class:"mxn2"},{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(n).options,(e,t)=>(Object(a["u"])(),Object(a["d"])(Ke,{key:t},{default:Object(a["N"])(()=>[Object(a["i"])(Be,{class:"block mxn2 px2 myn1 py1",id:`${Object(a["I"])(n).id}-${t}`,value:e.value,label:e.text,name:"company","model-value":Object(a["I"])(l),"onUpdate:modelValue":Object(a["I"])(i)},null,8,["id","value","label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"])]))}});const Ze=Ye;var et=Ze;const tt=["MOW","HKT","HKG","JNB","PTB","ARH","TRN","KRS","SRT","LOS","EKV","EKT"];var ct=c("7677");const at=tt.map(e=>({text:e,value:e})),ot=Object(a["A"])({from:void 0,to:void 0}),nt=Object(a["A"])({there:void 0,back:void 0}),lt=()=>{function e(e){ot.value={...ot.value,from:e}}function t(e){ot.value={...ot.value,to:e}}function c(){ot.value={...ot.value,from:void 0}}function o(){ot.value={...ot.value,to:void 0}}function n(e){nt.value={...nt.value,there:e}}function l(e){nt.value={...nt.value,back:e}}function i(){nt.value={...nt.value,there:void 0}}function s(){nt.value={...nt.value,back:void 0}}return Object(a["M"])(()=>{nt.value.back&&nt.value.there&&Object(ct["a"])(nt.value.back,nt.value.there)&&s()}),{directionOptions:at,selectedDirection:Object(a["z"])(ot),updateDirectionFrom:e,updateDirectionTo:t,clearDirectionFrom:c,clearDirectionTo:o,selectedDates:Object(a["z"])(nt),updateDateThere:n,updateDateBack:l,clearDateThere:i,clearDateBack:s}};var it=lt;const st={class:"app-input"};function ut(e,t){return Object(a["u"])(),Object(a["f"])("div",st,[Object(a["C"])(e.$slots,"label",{},void 0,!0),Object(a["C"])(e.$slots,"default",{},void 0,!0)])}c("77ab");const dt={},bt=l()(dt,[["render",ut],["__scopeId","data-v-2dc20720"]]);var rt=bt;const jt=["name","value","placeholder","disabled"],Ot={key:0,class:"app-select__dropdown shadow-3"};var pt=Object(a["j"])({__name:"AppSelect",props:{name:null,placeholder:null,isDisabled:{type:Boolean},modelValue:null,options:null,isClearable:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{name:o,placeholder:n,isDisabled:l,modelValue:i,options:s,isClearable:u=!1}=Object(a["H"])(c),d=Object(a["A"])(!1),b=Object(a["b"])(()=>{var e;return(null===(e=s.value.find(e=>e.value===(null===i||void 0===i?void 0:i.value)))||void 0===e?void 0:e.text)||""});function r(){d.value=!0}function j(){d.value=!1}function O(e){j(),t("update:modelValue",e)}function p(){t("update:modelValue",void 0)}return document.addEventListener("click",j),Object(a["r"])(()=>{document.removeEventListener("click",j)}),(e,t)=>(Object(a["u"])(),Object(a["d"])(rt,{class:"app-select"},{default:Object(a["N"])(()=>[Object(a["g"])("input",{name:Object(a["I"])(o),value:Object(a["I"])(b),placeholder:Object(a["I"])(n),disabled:!!Object(a["I"])(l),readonly:"",onFocus:r,onClick:t[0]||(t[0]=Object(a["P"])(()=>{},["stop"]))},null,40,jt),d.value?(Object(a["u"])(),Object(a["f"])("div",Ot,[Object(a["i"])(Ue,null,{default:Object(a["N"])(()=>[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(s),e=>(Object(a["u"])(),Object(a["d"])(Ke,{class:Object(a["p"])(["app-select__option cursor-pointer",{selected:Object(a["I"])(i)===e.value,disabled:e.isDisabled}]),key:e.value,onClick:t=>!e.isDisabled&&O(e.value)},{default:Object(a["N"])(()=>[Object(a["h"])(Object(a["G"])(e.text),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})])):Object(a["e"])("",!0),Object(a["I"])(u)&&Object(a["I"])(i)?(Object(a["u"])(),Object(a["f"])("span",{key:1,class:"app-select__close mdi mdi-close cursor-pointer",onClick:p})):Object(a["e"])("",!0)]),_:1}))}});c("40b1");const vt=l()(pt,[["__scopeId","data-v-f07ca4fc"]]);var mt=vt;const ft=["type"];var ht=Object(a["j"])({__name:"AppButton",props:{type:null,color:null,label:null,outlined:{type:Boolean},stretch:{type:Boolean}},setup(e){const t=e,{type:c,color:o,label:n,outlined:l,stretch:i}=Object(a["H"])(t);return(e,t)=>(Object(a["u"])(),Object(a["f"])("button",{class:Object(a["p"])(["app-button","subheading",Object(a["I"])(o),{outlined:Object(a["I"])(l),stretch:Object(a["I"])(i)}]),type:Object(a["I"])(c)||"button"},[Object(a["C"])(e.$slots,"default",{},()=>[Object(a["h"])(Object(a["G"])(Object(a["I"])(n)),1)])],10,ft))}});c("286a");const _t=l()(ht,[["__scopeId","data-v-11e1dff5"]]);var gt=_t;const kt=e=>(Object(a["x"])("data-v-02498338"),e=e(),Object(a["v"])(),e),It={class:"ticket-search-direction"},yt=kt(()=>Object(a["g"])("span",{class:"mdi mdi-swap-horizontal"},null,-1));var Tt=Object(a["j"])({__name:"TicketSearchDirection",setup(e){const{directionOptions:t,selectedDirection:c,updateDirectionFrom:o,updateDirectionTo:n,clearDirectionFrom:l,clearDirectionTo:i}=it(),s=Object(a["b"])(()=>t.map(e=>({...e,isDisabled:e.value===c.value.to}))),u=Object(a["b"])(()=>t.map(e=>({...e,isDisabled:e.value===c.value.from})));function d(){const e={...c.value};e.to?o(e.to):l(),e.from?n(e.from):i()}return(e,t)=>(Object(a["u"])(),Object(a["f"])("div",It,[Object(a["i"])(mt,{class:"ticket-search-direction__input shadow-3",placeholder:"Откуда","model-value":Object(a["I"])(c).from,options:Object(a["I"])(s),"onUpdate:modelValue":Object(a["I"])(o),clearable:""},null,8,["model-value","options","onUpdate:modelValue"]),Object(a["i"])(mt,{class:"ticket-search-direction__input shadow-3",placeholder:"Куда","model-value":Object(a["I"])(c).to,options:Object(a["I"])(u),"onUpdate:modelValue":Object(a["I"])(n),clearable:""},null,8,["model-value","options","onUpdate:modelValue"]),Object(a["i"])(gt,{class:"ticket-search-direction__swap shadow-3",onClick:d},{default:Object(a["N"])(()=>[yt]),_:1})]))}});c("4739");const Dt=l()(Tt,[["__scopeId","data-v-02498338"]]);var At=Dt,xt=c("ad53"),St=c("24e7");const wt=e=>(Object(a["x"])("data-v-00edbe88"),e=e(),Object(a["v"])(),e),Ct=wt(()=>Object(a["g"])("span",{class:"app-datepicker__icon mdi mdi-calendar-today"},null,-1));var Vt=Object(a["j"])({__name:"AppDatepicker",props:{name:null,placeholder:null,isDisabled:{type:Boolean},modelValue:null,isClearable:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{name:o,placeholder:n,modelValue:l,isDisabled:i,isClearable:s=!1}=Object(a["H"])(c);function u(e){t("update:modelValue",e)}function d(){t("update:modelValue",void 0)}return(e,t)=>(Object(a["u"])(),Object(a["d"])(rt,{class:"app-datepicker"},{default:Object(a["N"])(()=>[Object(a["i"])(Object(a["I"])(St["a"]),Object(a["n"])({class:"app-datepicker__control",name:Object(a["I"])(o),placeholder:Object(a["I"])(n),locale:Object(a["I"])(xt["a"]),"weekday-format":"EEEEEE","input-format":"d MMMM, EEEEEE","model-value":Object(a["I"])(l),"onUpdate:modelValue":u,disabled:Object(a["I"])(i)},e.$attrs),null,16,["name","placeholder","locale","model-value","disabled"]),Ct,Object(a["I"])(s)&&Object(a["I"])(l)?(Object(a["u"])(),Object(a["f"])("span",{key:0,class:"app-datepicker__close mdi mdi-close cursor-pointer",onClick:d})):Object(a["e"])("",!0)]),_:1}))}});c("4063");const Nt=l()(Vt,[["__scopeId","data-v-00edbe88"]]);var Et=Nt;const Lt={class:"ticket-search-dates"};var Bt=Object(a["j"])({__name:"TicketSearchDates",setup(e){const{selectedDates:t,updateDateBack:c,updateDateThere:o}=it();return(e,n)=>(Object(a["u"])(),Object(a["f"])("div",Lt,[Object(a["i"])(Et,{class:"ticket-search-dates__control shadow-3",placeholder:"Когда","model-value":Object(a["I"])(t).there,"onUpdate:modelValue":Object(a["I"])(o),clearable:""},null,8,["model-value","onUpdate:modelValue"]),Object(a["i"])(Et,{class:"ticket-search-dates__control shadow-3","model-value":Object(a["I"])(t).back,placeholder:"Обратно","onUpdate:modelValue":Object(a["I"])(c),clearable:"","lower-limit":Object(a["I"])(t).there},null,8,["model-value","onUpdate:modelValue","lower-limit"])]))}});c("b1f2");const Mt=l()(Bt,[["__scopeId","data-v-d4a5d35a"]]);var $t=Mt;const Pt={class:"ticket-search"};var zt=Object(a["j"])({__name:"TicketSearch",setup(e){return(e,t)=>(Object(a["u"])(),Object(a["f"])("div",Pt,[Object(a["i"])(At,{class:"ticket-search__direction"}),Object(a["i"])($t)]))}});c("d84e");const Ut=l()(zt,[["__scopeId","data-v-27c25aad"]]);var Ht=Ut;const Gt=[{text:"Самый дешевый",value:"cheapest"},{text:"Самый быстрый",value:"fastest"},{text:"Оптимальный",value:"optimal"}],Ft="cheapest";var Rt=Object(a["j"])({__name:"AppButtonToggle",props:{options:null,stretch:{type:Boolean},modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const c=e,{options:o}=Object(a["H"])(c);function n(e){t("update:modelValue",e)}return(t,c)=>(Object(a["u"])(),Object(a["f"])("div",{class:Object(a["p"])(["app-button-toggle",{stretch:e.stretch}])},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(o),(t,c)=>(Object(a["u"])(),Object(a["d"])(gt,{class:"app-button-toggle__item",key:c,color:t.value===e.modelValue?"primary":void 0,outlined:t.value!==e.modelValue,onClick:e=>n(t.value)},{default:Object(a["N"])(()=>[Object(a["h"])(Object(a["G"])(t.text),1)]),_:2},1032,["color","outlined","onClick"]))),128))],2))}});c("64a8");const Kt=l()(Rt,[["__scopeId","data-v-49f7f22a"]]);var Jt=Kt;const Wt=Object(a["A"])(Ft),qt=()=>{function e(e){Wt.value=e}return{sortingMode:Object(a["z"])(Wt),updateSortingMode:e}};var Qt=qt,Xt=Object(a["j"])({__name:"TicketSorting",setup(e){const{sortingMode:t,updateSortingMode:c}=Qt();function o(e){c(e)}return(e,c)=>(Object(a["u"])(),Object(a["d"])(Jt,{stretch:"",options:Object(a["I"])(Gt),"model-value":Object(a["I"])(t),"onUpdate:modelValue":o},null,8,["options","model-value"]))}});const Yt=Xt;var Zt=Yt,ec=Object(a["j"])({__name:"PaginationButton",props:{shownItemsCount:null,itemsPerPage:null},emits:["update:shownItemsCount"],setup(e,{emit:t}){const c=e,{shownItemsCount:o,itemsPerPage:n}=Object(a["H"])(c);function l(){t("update:shownItemsCount",o.value+n.value)}return(e,t)=>(Object(a["u"])(),Object(a["d"])(gt,Object(a["n"])(e.$attrs,{onClick:l}),{default:Object(a["N"])(()=>[Object(a["C"])(e.$slots,"default")]),_:3},16))}});const tc=ec;var cc=tc;const ac=Object(D["a"])({id:"ticketMachine",initial:"iddle",states:{...x}}),oc=Object(A["a"])(ac);c("13d5"),c("d9e2"),c("caad");var nc=c("1ba4");const lc=(e,{dates:t={},direction:c={},stopNumber:a=[],company:o})=>{const{from:n,to:l}=c,{there:i}=t,{origin:s,destination:u,dateStart:d,stops:b}=e.info,{companyId:r}=e;return(!n||s===n)&&((!l||u===l)&&(!(i&&!Object(nc["a"])(d,i))&&(!(a.length>0&&!a.includes(b.length))&&(!o||o===r))))},ic=()=>E.get("/163b5e66df9f2741243e").then(e=>e.data);var sc={fetchTickets:ic};const uc=(e,{dates:t,direction:c})=>{const a=t.there||c.from||c.to?e.filter(e=>lc(e,{dates:t,direction:c})):e,o=t.back&&c.from&&c.to?e.filter(e=>lc(e,{dates:{there:t.back,back:void 0},direction:{from:c.to,to:c.from}})):[],n=[...a,...o];return n},dc=(e,{stopNumber:t,company:c})=>e.filter(e=>lc(e,{stopNumber:t,company:"all"!==c?c:void 0})),bc=e=>e.sort((e,t)=>e.price-t.price),rc=e=>e.sort((e,t)=>e.info.duration-t.info.duration),jc=e=>{const t=e.reduce(({priceSum:e,durationSum:t},c)=>{const{info:a,price:o}=c;return{priceSum:e+o,durationSum:t+a.duration}},{priceSum:0,durationSum:0}),c=t.priceSum/e.length,a=t.durationSum/e.length;return e.sort((e,t)=>e.info.stops.length<t.info.stops.length?e.price<c||e.info.duration<a?-1:1:e.info.stops.length>t.info.stops.length?t.price<c||t.info.duration<a?1:-1:e.price-t.price)},Oc=(e,t)=>{if("cheapest"===t)return bc(e);if("fastest"===t)return rc(e);if("optimal"===t)return jc(e);throw new Error("there is no such sorting mode")},pc=(e,t)=>e.slice(0,t),vc=async()=>{oc.send("LOAD_DATA");try{const e=await sc.fetchTickets(),t=e.map(e=>({...e,info:{...e.info,dateStart:new Date(e.info.dateStart),dateEnd:new Date(e.info.dateEnd)}}));return oc.send(t.length>0?"DATA_LOADED":"FAIL"),t}catch(e){throw oc.send("FAIL"),e}};var mc={findTickets:uc,filterTickets:dc,sortTickets:Oc,loadTickets:vc,paginateTickets:pc};const fc=Object(a["A"])([]),hc=Object(a["A"])(ac.initialState.value);oc.onTransition(e=>{hc.value=e.value}).start();const _c=({direction:e,dates:t,stopNumber:c,company:o,sorting:n,count:l})=>{const i=Object(a["A"])([]),s=Object(a["A"])([]),u=Object(a["A"])([]),d=Object(a["A"])([]);Object(a["L"])([e,t,fc],()=>{const c=mc.findTickets(fc.value,{dates:t.value,direction:e.value});i.value=[...c]},{immediate:!0}),Object(a["L"])([c,o,i],()=>{const e=mc.filterTickets(i.value,{stopNumber:[...c.value],company:o.value});s.value=[...e]},{immediate:!0}),Object(a["L"])([n,s],()=>{const e=mc.sortTickets(s.value,n.value);u.value=[...e]},{immediate:!0}),Object(a["L"])([l,u],()=>{d.value=mc.paginateTickets(u.value,l.value)},{immediate:!0});const b=e=>{fc.value=e},r=async()=>{if("loading"!==hc.value)try{const e=await mc.loadTickets();b(e)}catch(e){b([])}};return"iddle"===hc.value&&r(),{tickets:Object(a["z"])(fc),foundTickets:Object(a["z"])(i),filteredTickets:Object(a["z"])(s),sortedTickets:Object(a["z"])(u),paginatedTickets:Object(a["z"])(d),updateTickets:b,loadTickets:r,state:Object(a["z"])(hc)}};var gc=_c;const kc=e=>(Object(a["x"])("data-v-e27db17e"),e=e(),Object(a["v"])(),e),Ic=kc(()=>Object(a["g"])("hr",null,null,-1)),yc={class:"clearfix mxn1"},Tc={class:"ticket-page__sidebar md-col md-col-4 px1"},Dc={class:"ticket-page__content md-col md-col-8 px1"},Ac={class:"ticket-page__tickets"},xc=Object(a["h"])("loading..."),Sc=Object(a["h"])(" Что-то пошло не так. Попробуйте перезагрузить страницу "),wc=Object(a["h"])(" Показать еще 5 билетов "),Cc=Object(a["h"])("Мы не нашли подходящих билетов. Попробуйте изменить условия поиска.");var Vc=Object(a["j"])({__name:"TicketPage",setup(e){const t=5,{stopNumberSelected:c}=fe(),{companySelected:o}=ye(),{selectedDirection:n,selectedDates:l}=it(),{sortingMode:i}=Qt(),s=Object(a["A"])(t),{filteredTickets:u,paginatedTickets:d,state:b}=gc({stopNumber:c,company:o,direction:n,dates:l,sorting:i,count:Object(a["z"])(s)});return Object(a["L"])([c,o,n,l,i],()=>{s.value=t}),(e,c)=>(Object(a["u"])(),Object(a["d"])(_,{class:"ticket-page"},{default:Object(a["N"])(()=>[Object(a["i"])(Ht),Ic,Object(a["g"])("div",yc,[Object(a["g"])("div",Tc,[Object(a["i"])(et)]),Object(a["g"])("div",Dc,[Object(a["i"])(Zt,{class:"mb2"}),Object(a["g"])("div",Ac,["loading"===Object(a["I"])(b)?(Object(a["u"])(),Object(a["f"])(a["a"],{key:0},[xc],64)):Object(a["e"])("",!0),"failure"===Object(a["I"])(b)?(Object(a["u"])(),Object(a["f"])(a["a"],{key:1},[Sc],64)):Object(a["e"])("",!0),"ready"===Object(a["I"])(b)?(Object(a["u"])(),Object(a["f"])(a["a"],{key:2},[Object(a["I"])(u).length>0?(Object(a["u"])(),Object(a["f"])(a["a"],{key:0},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["B"])(Object(a["I"])(d),e=>(Object(a["u"])(),Object(a["d"])(je,{key:e.id,"ticket-data":e,class:"mb2"},null,8,["ticket-data"]))),128)),Object(a["I"])(u).length>s.value?(Object(a["u"])(),Object(a["d"])(cc,{key:0,"shown-items-count":s.value,"onUpdate:shown-items-count":c[0]||(c[0]=e=>s.value=e),"items-per-page":t,class:"block",color:"primary",stretch:""},{default:Object(a["N"])(()=>[wc]),_:1},8,["shown-items-count"])):Object(a["e"])("",!0)],64)):(Object(a["u"])(),Object(a["f"])(a["a"],{key:1},[Cc],64))],64)):Object(a["e"])("",!0)])])])]),_:1}))}});c("2ec1");const Nc=l()(Vc,[["__scopeId","data-v-e27db17e"]]);var Ec=Nc;const Lc=[{path:"/",name:"TicketPage",component:Ec}],Bc=Object(d["a"])({history:Object(d["b"])("/aviaticket/"),routes:Lc});var Mc=Bc,$c=c("5502"),Pc=Object($c["a"])({state:{},mutations:{},actions:{},modules:{}});c("208c"),c("b5cc"),c("fb98");Object(a["c"])(u).use(Pc).use(Mc).mount("#app")},d09f:function(e,t,c){"use strict";c("cbe1")},d84e:function(e,t,c){"use strict";c("bbf3")},da38:function(e,t,c){},f066:function(e,t,c){"use strict";c("9e0b")},f8a5:function(e,t,c){},f937:function(e,t,c){"use strict";c("217d")},fb98:function(e,t,c){}});
//# sourceMappingURL=app.9aed88ef.js.map